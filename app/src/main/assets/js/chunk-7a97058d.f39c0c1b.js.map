{"version":3,"sources":["webpack:///./src/views/Register.vue?b241","webpack:///./src/views/Register.vue","webpack:///./src/views/Register.vue?be94","webpack:///./node_modules/core-js/modules/es.array.join.js","webpack:///./node_modules/core-js/internals/array-method-is-strict.js"],"names":["id","class","action","for","type","name","minlength","maxlength","username","verifyName","autocomplete","password","verifyPwd","cpassword","verifyCPwd","contactIsEmail","email","verifyEmail","emailChange","getVCode","verifyLabel","validation","verifyCode","to","register","data","gender","nickname","trueVCode","resVCodeEmail","latitude","longitude","methods","_this","this","button","document","querySelector","blur","setAttribute","secs","time","setInterval","clearInterval","removeAttribute","axios","post","params","then","res","code","updateInput","inputID","isValid","inputDOM","classlist","classList","remove","add","regex","test","verifyAll","errorItems","push","length","msg","join","$store","commit","sync","contact","userdata","result","put","$router","catch","err","response","status","render","__scopeId","$","IndexedObject","toIndexedObject","arrayMethodIsStrict","nativeJoin","ES3_STRINGS","Object","STRICT_METHOD","target","proto","forced","separator","call","undefined","fails","module","exports","METHOD_NAME","argument","method"],"mappings":"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","file":"js/chunk-7a97058d.f39c0c1b.js","sourcesContent":["export { default } from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../node_modules/css-loader/dist/cjs.js??ref--6-oneOf-1-1!../../node_modules/vue-loader-v16/dist/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader-v16/dist/index.js??ref--0-1!./Register.vue?vue&type=style&index=0&id=9720e4aa&scoped=true&lang=css\"; export * from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../node_modules/css-loader/dist/cjs.js??ref--6-oneOf-1-1!../../node_modules/vue-loader-v16/dist/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader-v16/dist/index.js??ref--0-1!./Register.vue?vue&type=style&index=0&id=9720e4aa&scoped=true&lang=css\"","<template>\n  <div id=\"register\" class=\"my-container\">\n    <h1 class=\"title\">Register</h1>\n    <form action=\"\">\n      <div class=\"form-group\">\n        <label for=\"ipt_reg_name\">User Name</label>\n        <small class=\"tips\">Only 4 to 32 letters, numbers and underscores are allowed</small>\n        <input type=\"text\" class=\"form-control\" id=\"ipt_reg_name\" name=\"user\" minlength=\"4\" maxlength=\"32\" v-model=\"username\" @blur=\"verifyName()\">\n      </div>\n      <div class=\"form-group\">\n        <label for=\"ipt_reg_pwd\">Password</label>\n        <small class=\"tips\">Your password should be no less than 6 and no more than 32 characters</small>\n        <input type=\"password\" class=\"form-control\" id=\"ipt_reg_pwd\" name=\"pwd\" autocomplete=\"new-password\" v-model=\"password\" @blur=\"verifyPwd()\">\n      </div>\n      <div class=\"form-group\">\n        <label for=\"ipt_reg_cpwd\">Confirm Password</label>\n        <small class=\"tips\">Two inputed password should be the same</small>\n        <input type=\"password\" class=\"form-control\" id=\"ipt_reg_cpwd\" name=\"cpwd\" autocomplete=\"new-password\" v-model=\"cpassword\" @blur=\"verifyCPwd()\">\n      </div>\n      <!-- <div class=\"form-group\">\n        <label for=\"\">Contact Infomation</label>\n        <small class=\"d-block text-black-50\">Contact information is only used for password retrieval</small>\n        <div class=\"d-flex justify-content-between\">\n          <div class=\"form-check form-check form-control\">\n            <input class=\"form-check-input\" type=\"radio\" name=\"inlineRadioOptions\" id=\"inlineRadio1\" value=\"email\">\n            <label class=\"form-check-label\" for=\"inlineRadio1\">Email</label>\n          </div>\n          <div style=\"width:1rem;\"></div>\n          <div class=\"form-check form-check form-control\">\n            <input class=\"form-check-input\" type=\"radio\" name=\"inlineRadioOptions\" id=\"inlineRadio1\" value=\"phone\">\n            <label class=\"form-check-label\" for=\"inlineRadio1\">Phone</label>\n          </div>\n        </div>\n      </div> -->\n      <div class=\"form-group\">\n        <label for=\"ipt_reg_email\" v-if=\"contactIsEmail\">Email</label>\n        <small class=\"tips\">Your email will only be used for password retrieval</small>\n        <!-- <label for=\"ipt_reg_tel\" v-else>Phone</label> -->\n        <div class=\"d-flex\">\n          <input type=\"email\" class=\"form-control\" id=\"ipt_reg_email\" v-if=\"contactIsEmail\" v-model=\"email\" @blur=\"verifyEmail()\" @change=\"emailChange()\">\n          <!-- <input type=\"tel\" class=\"form-control\" id=\"ipt_reg_tel\" v-else> -->\n          <button class=\"btn btn-link\" type=\"button\" id=\"verifyButton\" @click=\"getVCode()\">{{ verifyLabel }}</button>\n        </div>\n      </div>\n      <div class=\"form-group\">\n        <label for=\"ipt_reg_vcode\">Validation Code</label>\n        <input type=\"text\" class=\"form-control\" id=\"ipt_reg_vcode\" v-model=\"validation\" @blur=\"verifyCode()\">\n      </div>\n      <div class=\"btngrp\">\n        <router-link to=\"/\"><button class=\"btn btn-link\">Cancel</button></router-link>\n        <button class=\"btn btn-primary\" type=\"button\" @click=\"register()\">Submit</button>\n      </div>\n    </form>\n\n  </div>\n</template>\n\n<script>\nexport default {\n  data () {\n    return {\n      username: '',\n      password: '',\n      cpassword: '',\n      gender: null,\n      nickname: null,\n      email: '',\n      contactIsEmail: true,\n      verifyLabel: 'Verify',\n      trueVCode: null,\n      validation: '',\n      resVCodeEmail: '',\n      latitude: 0,\n      longitude: 0\n    }\n  },\n  methods: {\n    getVCode () {\n      const _this = this\n      const button = document.querySelector('#verifyButton')\n      button.blur()\n      button.setAttribute('disabled', 'disabled')\n      let secs = 60\n      const time = setInterval(() => {\n        if (secs > 0) {\n          _this.verifyLabel = `${secs--} s`\n        } else {\n          clearInterval(time)\n          _this.verifyLabel = 'Verify'\n          button.removeAttribute('disabled')\n        }\n      }, 1000)\n      this.axios.post('/confirm', null, { params: { email: _this.email } })\n        .then(res => {\n          _this.trueVCode = res.data.code\n          _this.resVCodeEmail = _this.email\n        })\n    },\n    updateInput (inputID, isValid) {\n      const inputDOM = document.querySelector(inputID)\n      const classlist = inputDOM.classList\n      classlist.remove(!isValid ? 'is-valid' : 'is-invalid')\n      classlist.add(isValid ? 'is-valid' : 'is-invalid')\n      return isValid\n    },\n    verifyName () {\n      const regex = /^[\\w]{4,32}$/\n      return this.updateInput('#ipt_reg_name', regex.test(this.username))\n    },\n    verifyPwd () {\n      const regex = /^.{6,32}$/\n      return this.updateInput('#ipt_reg_pwd', regex.test(this.password))\n    },\n    verifyCPwd () {\n      const regex = /^.{6,32}$/\n      return this.updateInput('#ipt_reg_cpwd', regex.test(this.cpassword) && this.password === this.cpassword)\n    },\n    emailChange () {\n      if (this.resVCodeEmail !== '') {\n        this.verifyCode()\n      }\n    },\n    verifyEmail () {\n      const regex = /^[A-Za-z0-9]+([_.][A-Za-z0-9]+)*@([A-Za-z0-9-]+\\.)+[A-Za-z]{2,6}$/\n      return this.updateInput('#ipt_reg_email', regex.test(this.email))\n    },\n    verifyCode () {\n      return this.updateInput('#ipt_reg_vcode', this.trueVCode === this.validation && this.email === this.resVCodeEmail)\n    },\n    verifyAll () {\n      const errorItems = []\n      this.verifyName() === false && errorItems.push('user name')\n      this.verifyPwd() === false && errorItems.push('password')\n      this.verifyCPwd() === false && errorItems.push('confirm password')\n      this.verifyEmail() === false && errorItems.push('email')\n      this.verifyCode() === false && errorItems.push('validation code')\n      if (errorItems.length !== 0) {\n        const msg = `Please check your ${errorItems.join(', ')}!`\n        this.$store.commit('updateAlert', { msg: msg, type: 'danger', sync: false })\n        return false\n      }\n      return true\n    },\n    register () {\n      if (this.verifyAll() === false) {\n        return\n      }\n      const _this = this\n      this.$store.commit('updateAlert', { msg: 'Registering, please for a moment...', type: 'primary', sync: true })\n      this.axios.post('/register', null, {\n        params: {\n          username: _this.username,\n          password: _this.password,\n          contact: _this.email,\n          gender: '',\n          nickname: '',\n          latitude: _this.latitude,\n          longitude: _this.longitude\n        }\n      }).then(res => {\n        const userdata = res.data.result.data[0]\n        userdata.password = this.password\n        this.$store.commit('login', userdata)\n        _this.axios.put('/login', null, {\n          params: userdata\n        }).then(res => {\n          _this.$store.commit('updateAlert', {\n            msg: 'Successfully registered!',\n            type: 'success',\n            sync: false\n          })\n          this.$router.push('/addProfile')\n        })\n      }).catch(err => {\n        if (err.response.status === 500) {\n          this.updateInput('#ipt_reg_name', false)\n          _this.$store.commit('updateAlert', { msg: `Repeated user name '${_this.username}' founded! Please try a new one!`, type: 'danger' })\n        }\n      })\n    }\n  }\n}\n</script>\n<style scoped>\n.btngrp {\n  display: flex;\n  justify-content: space-between;\n}\n#verifyButton {\n  min-width: 5rem;\n}\n</style>\n","import { render } from \"./Register.vue?vue&type=template&id=9720e4aa&scoped=true&bindings={\\\"username\\\":\\\"data\\\",\\\"password\\\":\\\"data\\\",\\\"cpassword\\\":\\\"data\\\",\\\"gender\\\":\\\"data\\\",\\\"nickname\\\":\\\"data\\\",\\\"email\\\":\\\"data\\\",\\\"contactIsEmail\\\":\\\"data\\\",\\\"verifyLabel\\\":\\\"data\\\",\\\"trueVCode\\\":\\\"data\\\",\\\"validation\\\":\\\"data\\\",\\\"resVCodeEmail\\\":\\\"data\\\",\\\"latitude\\\":\\\"data\\\",\\\"longitude\\\":\\\"data\\\",\\\"getVCode\\\":\\\"options\\\",\\\"updateInput\\\":\\\"options\\\",\\\"verifyName\\\":\\\"options\\\",\\\"verifyPwd\\\":\\\"options\\\",\\\"verifyCPwd\\\":\\\"options\\\",\\\"emailChange\\\":\\\"options\\\",\\\"verifyEmail\\\":\\\"options\\\",\\\"verifyCode\\\":\\\"options\\\",\\\"verifyAll\\\":\\\"options\\\",\\\"register\\\":\\\"options\\\"}\"\nimport script from \"./Register.vue?vue&type=script&lang=js\"\nexport * from \"./Register.vue?vue&type=script&lang=js\"\n\nimport \"./Register.vue?vue&type=style&index=0&id=9720e4aa&scoped=true&lang=css\"\nscript.render = render\nscript.__scopeId = \"data-v-9720e4aa\"\n\nexport default script","'use strict';\nvar $ = require('../internals/export');\nvar IndexedObject = require('../internals/indexed-object');\nvar toIndexedObject = require('../internals/to-indexed-object');\nvar arrayMethodIsStrict = require('../internals/array-method-is-strict');\n\nvar nativeJoin = [].join;\n\nvar ES3_STRINGS = IndexedObject != Object;\nvar STRICT_METHOD = arrayMethodIsStrict('join', ',');\n\n// `Array.prototype.join` method\n// https://tc39.github.io/ecma262/#sec-array.prototype.join\n$({ target: 'Array', proto: true, forced: ES3_STRINGS || !STRICT_METHOD }, {\n  join: function join(separator) {\n    return nativeJoin.call(toIndexedObject(this), separator === undefined ? ',' : separator);\n  }\n});\n","'use strict';\nvar fails = require('../internals/fails');\n\nmodule.exports = function (METHOD_NAME, argument) {\n  var method = [][METHOD_NAME];\n  return !!method && fails(function () {\n    // eslint-disable-next-line no-useless-call,no-throw-literal\n    method.call(null, argument || function () { throw 1; }, 1);\n  });\n};\n"],"sourceRoot":""}